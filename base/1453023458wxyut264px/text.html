<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Следующий пример кода демонстрирует последовательность выполнения действий при создании (инициализации класса, вызова конструктора и деструктора.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt;">Сначала пример:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">#include &lt;iostream&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">using namespace std;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; font-weight:600; color:#6a0e07;">// Базовый класс</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">class Base </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    Base() { cout &lt;&lt; &quot;Base::constructor()&quot; &lt;&lt; endl; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    virtual ~Base() { cout &lt;&lt; &quot;Base::destructor()&quot; &lt;&lt; endl; } </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    virtual void print() = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">};</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; font-weight:600; color:#6a0e07;">// Производный класс</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">class Derived: public Base </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    Derived() { cout &lt;&lt; &quot;Derived::constructor()&quot; &lt;&lt; endl; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">   ~Derived() { cout &lt;&lt; &quot;Derived::destructor()&quot; &lt;&lt; endl; }    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    void print() {}   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    Object  obj;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; font-weight:600; color:#6a0e07;">// Вспомогательный класс, объект которого используется в производном классе</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">class Object  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">  public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    Object() { cout &lt;&lt; &quot;Object::constructor()&quot; &lt;&lt; endl; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">   ~Object() { cout &lt;&lt; &quot;Object::destructor()&quot; &lt;&lt; endl; }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; font-weight:600; color:#6a0e07;">// Основная функция</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">int main ()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    Derived *p = new Derived;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    delete p;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">    return 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:10pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">На всякий случай надо обратить внимание, что перегружаемые в производном классе методы - деструктор и метод print() - в базовом классе должны быть объявлены как </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">virtual</span><span style=" font-size:10pt; color:#000000;">. Если не обозначит как </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">virtual</span><span style=" font-size:10pt; color:#000000;"> деструктор базового класса, тогда не будет происходить вызова деструктора производного класса при разрушении объекта производного класса. Если не обозначить как виртуальный метод </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">print()</span><span style=" font-size:10pt; color:#000000;">, то компилятор будет ругаться что перегружается не виртуальный метод.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;"><br />В программе создается один экземпляр производного класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600; color:#000000;">Последовательность создания объекта</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; color:#000000;">1.</span><span style=" font-size:10pt; color:#000000;"> Создание объекта производного класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;"> начинается с </span><span style=" font-size:10pt; font-weight:600; color:#000000;">инициализации свойств</span><span style=" font-size:10pt; color:#000000;"> базового класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base</span><span style=" font-size:10pt; color:#000000;"> (этап 1) и </span><span style=" font-size:10pt; font-weight:600; color:#000000;">запуска конструктора</span><span style=" font-size:10pt; color:#000000;"> базового класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base</span><span style=" font-size:10pt; color:#000000;"> (этап 2). Никаких свойств у базового класса нет, поэтому этап 1 нам будет невиден. На экране появится сообщение конструктора:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base::constructor()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; color:#000000;">2.</span><span style=" font-size:10pt; color:#000000;"> Далее происходит инициализация свойств и запуск конструктора производного класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;">. У производного класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived </span><span style=" font-size:10pt; color:#000000;">есть свойство </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">obj</span><span style=" font-size:10pt; color:#000000;">. Как было сказано выше, будет запущен этап 1 - инициализация свойств класса, а значит инициализация объекта </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">obj</span><span style=" font-size:10pt; color:#000000;">. Инициализация объекта </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">obj</span><span style=" font-size:10pt; color:#000000;"> состоит все из тех же двух этапов - инициализация свойств и запуск конструктора.  Свойств у класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object</span><span style=" font-size:10pt; color:#000000;"> нет, поэтому этап 1 мы не видим. Происходит запуск конструктора объекта </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">obj</span><span style=" font-size:10pt; color:#000000;">. На экране мы увидим:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object::constructor()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">То есть, когда класс </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;"> включает в себя объект другого класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object</span><span style=" font-size:10pt; color:#000000;">, вначале происходит создание объекта включаемого класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object</span><span style=" font-size:10pt; color:#000000;">, и только потом создается объект </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; color:#000000;">3.</span><span style=" font-size:10pt; color:#000000;"> Инициализация свойств производного класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;"> описана в пункте 2. Теперь настает время второго этапа - т. е. запуска конструктора </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;">. На экране мы увидим:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived::constructor()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Объект </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;"> создан. Он унаследован от класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base</span><span style=" font-size:10pt; color:#000000;">, и содержит экземпляр класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object</span><span style=" font-size:10pt; color:#000000;"> в одном из своих полей.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600; color:#000000;">Последовательность удаления объектов</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Последовательность удаления объектов будет обратна последовательности создания структуры объектов:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived::destructor()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Object::destructor()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base::destructor()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600; color:#000000;">Бонус: трюки C++ при создании объекта</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Программисты C++ очень любят неочевидные конструкции. Почему-то считается хорошим тоном использовать побочные эффекты в выражениях, заворачивать код в короткие, но плохо читаемые конструкции, писать условия с перестановкой естественных lvalue и rvalue задом-наперед, и использовать прочие прелести C++.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Опытный C++ программист обязательно воспользуется одним из свойств динамического полиморфизма - а именно возможностью доступа к объекту производного класса по указателю на базовый класс. И даже в строке создания объекта класса </span><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived</span><span style=" font-size:10pt; color:#000000;"> он не напишет естественное:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Derived *p = new Derived;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Он напишет вот так:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier 10 Pitch'; font-size:10pt; color:#6a0e07;">Base *p = new Derived;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">Какой в этом смысл - не совсем понятно. Возможно, таким образом упрощается вся структура программы: вместо точного указания типа класса везде используется просто тип базового класса. Но однозначного подтверждения этой мысли у меня нет, поэтому вопрос &quot;зачем так делать?&quot; остается открытым.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">При инициализации указателя базового класса указателем на экземпляр производного класса, происходит так называемый upcast. Следует обратить внимание, что для upcast не требуется никаких конструкций приведения типа (в отличие от обратного преобразования типа, именуемого downcast). Об этом подробнее написано в статье:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="mytetra://note/1459542913jsssnlsm5t"><span style=" font-size:10pt; text-decoration: underline; color:#0000ff;">Приведение типов в C++. Терминология, динамический полиморфизм</span></a></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:10pt; color:#000000;">В любом случае стоит привыкнуть к тому, что в реальных проектах сплошь и рядом будут встречаться конструкции инициализации указателей объектами производных классов.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:10pt; color:#000000;"><br /></p></body></html>