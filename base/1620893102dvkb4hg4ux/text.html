<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Graphviz — утилита командной строки для генерации схем графов на основе текстовых описаний узлов и рёбер. Из статьи вы узнаете, как и языка C++ программно вызвать graphiz с заданными параметрами, прочитать вывод и код возврата вызванной утилиты. Способ можно использовать в отрыве от Graphviz, здесь он взят для примера.</p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow0"></a><span style=" font-size:x-large; font-weight:600; color:#000000;">У</span><span style=" font-size:x-large; font-weight:600; color:#000000;">становка graphviz</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Чтобы получить graphviz на Windows, вам нужно:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">установить Graphviz из MSI-пакета с сайта <a href="http://www.graphviz.org/Download_windows.php"><span style=" text-decoration: underline; color:#0000ff;">graphviz.org</span></a></li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">добавить в системную переменную PATH путь к Graphviz (полный путь к поддиректории Graphviz2.38\bin внутри Program Files)</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Для Ubuntu потребуется:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">установить пакет dot</li></ul>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">После установки проверьте работу graphviz на простом примере:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">digraph G {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0 [shape=&quot;circle&quot;label=&quot;S0(a)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">1 [shape=&quot;box&quot;label=&quot;S1(b)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">2 [shape=&quot;box&quot;label=&quot;S2(c)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0-&gt;1 [label=&quot; a &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0-&gt;2 [label=&quot; b &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">1-&gt;1 [label=&quot; b &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">2-&gt;1 [label=&quot; a &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow1"></a><span style=" font-size:x-large; font-weight:600; color:#000000;">А</span><span style=" font-size:x-large; font-weight:600; color:#000000;">втоматизируем вызов Graphviz</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Для автоматизации нам потребуется кроссплатформенный способ запуска внешнего процесса из C++. Например, функции popen/pclose из стандарта POSIX.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">На Windows название функции popen изменено на _popen. Это легко исправить с помощью препроцессора:</span></p>
<h5 style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow2"></a><span style=" font-size:small; font-weight:600; color:#000000;">м</span><span style=" font-size:small; font-weight:600; color:#000000;">акрозамена popen/pclose</span></h5>
<h5 style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:small; font-weight:600; color:#000000;"><br /></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">#ifdef _WIN32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">#define popen _popen</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">#define pclose _pclose</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">#endif</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600; color:#999999;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Используя </span><a href="https://msdn.microsoft.com/en-us/library/96ayss4b.aspx"><span style=" text-decoration: underline; color:#2a7ae2;">пример из документации (msdn.microsoft.com)</span></a><span style=" color:#000000;">, можно реализовать функцию для запуска произвольной команды, печати вывода в консоль и возврата true/false при успешном/неуспешном выполнении.</span></p>
<h5 style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow3"></a><span style=" font-size:small; font-weight:600; color:#000000;">о</span><span style=" font-size:small; font-weight:600; color:#000000;">бъявление класса CUtils</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#999999;">#pragma once</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600; color:#999999;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#999999;">#include &lt;string&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-weight:600; color:#999999;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">class</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">CUtils</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">    CUtils() </span><span style=" font-weight:600; color:#000000;">=</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">delete</span><span style=" color:#000000;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">    </span><span style=" font-weight:600; color:#000000;">static</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">bool</span><span style=" color:#000000;"> RunProcess(std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">const&amp;</span><span style=" color:#000000;"> command);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<h5 style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow4"></a><span style=" font-size:small; font-weight:600; color:#000000;">з</span><span style=" font-size:small; font-weight:600; color:#000000;">апуск внешней команды в CUtils::RunProcess</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#445588;">bool</span><span style=" color:#000000;"> CUtils</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">RunProcess(</span><span style=" font-weight:600; color:#000000;">const</span><span style=" color:#000000;"> std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;">command)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	CPipeHandle pipe(popen(command.c_str(), </span><span style=" color:#dd1144;">&quot;r&quot;</span><span style=" color:#000000;">));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">if</span><span style=" color:#000000;"> (</span><span style=" font-weight:600; color:#000000;">!</span><span style=" color:#000000;">pipe)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#0086b3;">false</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">vector</span><span style=" font-weight:600; color:#000000;">&lt;</span><span style=" font-weight:600; color:#445588;">char</span><span style=" font-weight:600; color:#000000;">&gt;</span><span style=" color:#000000;"> buffer(</span><span style=" color:#009999;">256</span><span style=" color:#000000;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">while</span><span style=" color:#000000;"> (std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">fgets(buffer.data(), </span><span style=" font-weight:600; color:#445588;">int</span><span style=" color:#000000;">(buffer.size()), pipe))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">fputs(buffer.data(), stderr);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">if</span><span style=" color:#000000;"> (std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">feof(pipe))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#0086b3;">true</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-style:italic; color:#999988;">// process run failed, print error.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">fputs(std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">strerror(errno), stderr);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#0086b3;">false</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Класс CPipeHandle — это простейшая безопасная обёртка над FILE*, в деструкторе которой автоматически вызывается закрытие канала через pclose.</span></p>
<h5 style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow5"></a><span style=" font-size:small; font-weight:600; color:#000000;">R</span><span style=" font-size:small; font-weight:600; color:#000000;">AII-обёртка для FILE*</span></h5>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">namespace</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">class</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">CPipeHandle</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	CPipeHandle(</span><span style=" font-weight:600; color:#445588;">FILE</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">*</span><span style=" color:#000000;">pipe)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">:</span><span style=" color:#000000;"> m_pipe(pipe)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">~</span><span style=" color:#000000;">CPipeHandle()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">if</span><span style=" color:#000000;"> (m_pipe)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">			pclose(m_pipe);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">operator</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">FILE</span><span style=" font-weight:600; color:#000000;">*</span><span style=" color:#000000;">()</span><span style=" font-weight:600; color:#000000;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> m_pipe;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">private:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#445588;">FILE</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">*</span><span style=" color:#000000;">m_pipe </span><span style=" font-weight:600; color:#000000;">=</span><span style=" color:#000000;"> </span><span style=" color:#0086b3;">nullptr</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">};</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Чтобы воспользоваться API, нужно указать полную команду со всеми аргументами. Если путь к исполняемому файлу команды не добавлен в переменную окружения PATH, то придётся указать полный путь к .exe. Вот пример вызова Graphviz для преобразования диаграммы fsm.dot в изображение fsm.png</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">CUtils</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">RunProcess(</span><span style=" color:#dd1144;">&quot;dot -Tpng -ofsm.png fsm.dot&quot;</span><span style=" color:#000000;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<h2 align="center" style=" margin-top:32px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="wow6"></a><span style=" font-size:x-large; font-weight:600; color:#000000;">К</span><span style=" font-size:x-large; font-weight:600; color:#000000;">ласс генерации кода для Graphviz</span></h2>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Допустим, нам захочется сделать сериализацию дерева или графа в язык Graphviz, чтобы автоматизировать их визуализацию. Допустим, мы хотим визуализировать конечный автомат:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1620893186h1jidz7rt3.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">На выходе мы должны получить примерно такой файл *.dot:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">digraph G {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0 [shape=&quot;circle&quot;label=&quot;S0(a)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">1 [shape=&quot;box&quot;label=&quot;S1(b)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">2 [shape=&quot;box&quot;label=&quot;S2(c)&quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0-&gt;1 [label=&quot; a &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">0-&gt;2 [label=&quot; b &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">1-&gt;1 [label=&quot; b &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">2-&gt;1 [label=&quot; a &quot;];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">В файле указаны надписи на вершинах и рёбрах графа, где под вершинами подразумеваются состояния, а под рёбрами — переходы. Для вершин указана форма: для начального состояния круг (circle), для конечных состояний (терминалов) двойной круг (doublecircle), для промежуточных состояний (нетерминалов) прямоугольник (box).</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Вспомогательный класс для сериализации назовём CDotWriter. Определение класса:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">enum</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">class</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">StateType</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	Initial,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	Nonterminal,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	Terminal</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">class</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#445588;">CDotWriter</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">public:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	CDotWriter(std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">ostream </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;"> out);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">~</span><span style=" color:#000000;">CDotWriter();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#445588;">void</span><span style=" color:#000000;"> PrintVertex(</span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> index, std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">const&amp;</span><span style=" color:#000000;"> label, StateType type </span><span style=" font-weight:600; color:#000000;">=</span><span style=" color:#000000;"> StateType</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">Nonterminal);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#445588;">void</span><span style=" color:#000000;"> PrintEdge(</span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> from, </span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> to, std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">const&amp;</span><span style=" color:#000000;"> label);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#000000;">private:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string GetShape(StateType type)</span><span style=" font-weight:600; color:#000000;">const</span><span style=" color:#000000;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">ostream </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;"> m_out;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">};</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">Реализации методов выглядят так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">CDotWriter</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">CDotWriter(std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">ostream </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;">out)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">:</span><span style=" color:#000000;"> m_out(out)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;digraph G {\n&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">CDotWriter</span><span style=" font-weight:600; color:#000000;">::~</span><span style=" color:#000000;">CDotWriter()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;}\n&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#445588;">void</span><span style=" color:#000000;"> CDotWriter</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">PrintVertex(</span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> index, </span><span style=" font-weight:600; color:#000000;">const</span><span style=" color:#000000;"> std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;">label, StateType type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> index </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot; [&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;shape=\&quot;&quot;</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> GetShape(type) </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;\&quot;&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;label=\&quot;&quot;</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> label </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;\&quot;];\n&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; color:#445588;">void</span><span style=" color:#000000;"> CDotWriter</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">PrintEdge(</span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> from, </span><span style=" font-weight:600; color:#445588;">size_t</span><span style=" color:#000000;"> to, </span><span style=" font-weight:600; color:#000000;">const</span><span style=" color:#000000;"> std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string </span><span style=" font-weight:600; color:#000000;">&amp;</span><span style=" color:#000000;">label)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	m_out </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> from </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;-&gt;&quot;</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> to </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot; [label=\&quot; &quot;</span><span style=" color:#000000;"> </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> label </span><span style=" font-weight:600; color:#000000;">&lt;&lt;</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot; \&quot;];\n&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string CDotWriter</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">GetShape(StateType type) </span><span style=" font-weight:600; color:#000000;">const</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">switch</span><span style=" color:#000000;"> (type)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">case</span><span style=" color:#000000;"> StateType:</span><span style=" font-weight:600; color:#000000;">:</span><span style=" color:#000000;">Initial</span><span style=" font-weight:600; color:#000000;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;circle&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">case</span><span style=" color:#000000;"> StateType:</span><span style=" font-weight:600; color:#000000;">:</span><span style=" color:#000000;">Nonterminal</span><span style=" font-weight:600; color:#000000;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;box&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">case</span><span style=" color:#000000;"> StateType:</span><span style=" font-weight:600; color:#000000;">:</span><span style=" color:#000000;">Terminal</span><span style=" font-weight:600; color:#000000;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">		</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> </span><span style=" color:#dd1144;">&quot;doublecircle&quot;</span><span style=" color:#000000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">	</span><span style=" font-weight:600; color:#000000;">return</span><span style=" color:#000000;"> std</span><span style=" font-weight:600; color:#000000;">::</span><span style=" color:#000000;">string();</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; color:#000000;"><br /></p></body></html>