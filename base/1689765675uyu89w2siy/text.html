<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Операция запятая &quot;,&quot; позволяет объединить несколько выражений в одно выражение и, таким образом, в Си вводится понятие &quot;выражение с запятой&quot;, в общем случае имеющее вид:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">&lt;выражение&gt;, &lt;выражение&gt;, &lt;выражение&gt;, ...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Пара выражений, разделенных запятой, вычисляется слева направо. Тип и значение результата выражения с запятой есть тип и значение самого правого выражения. Например: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">k=a+b,d=m+n,5.2+7;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">- это выражение с запятой. Выражение вычисляется слева направо. Его значением является число с плавающей точкой </span><span style=" font-family:'FreeMono'; color:#6a1009;">12.2</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> типа </span><span style=" font-family:'FreeMono'; color:#6a1009;">double</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Внимание!</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> Данное выражение </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">НЕ</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> означает, что переменной </span><span style=" font-family:'FreeMono'; color:#6a1009;">k</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> будет присвоено значение </span><span style=" font-family:'FreeMono'; color:#6a1009;">12.2</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> ! В процессе вычисления этого выражения переменным </span><span style=" font-family:'FreeMono'; color:#6a1009;">k</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и </span><span style=" font-family:'FreeMono'; color:#6a1009;">d</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> будут присвоены, соответственно, значения </span><span style=" font-family:'FreeMono'; color:#6a1009;">a+b</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и </span><span style=" font-family:'FreeMono'; color:#6a1009;">m+n</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">А результатом работы всего выражения как раз и будет число </span><span style=" font-family:'FreeMono'; color:#6a1009;">12.2</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Только оно никуда записано не будет, потому что в данном примере нет присвоения значения всего выражения какой-то переменной.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Так происходит из-за </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">приоритета операций</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">: операция запятая имеет самый низкий приоритет, и выполняется в последнюю очередь.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Из-за этой особенности, часто можно встретить такую ошибку. Простое выражение:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">c = 1, 2, 3, 4, 5;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">может восприниматься разработчиком неправильно. Разработчик может подумать, что здесь </span><span style=" font-family:'FreeMono'; color:#6a1009;">c=5</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, однако это неверно. Операция присвоения имеет бОльший приоритет, и выполнится первой. Поэтому в конце работы данного выражения </span><span style=" font-family:'FreeMono'; color:#6a1009;">c=1</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, а результат всего выражения равен </span><span style=" font-family:'FreeMono'; color:#6a1009;">5</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, но никуда не записывается.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Как получить значение всего выражения, в которой используется операция запятая? Надо воспользоваться скобками. Для выражения </span><span style=" font-family:'FreeMono'; color:#6a1009;">d=(k=5+2,5+3);</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> значение переменной </span><span style=" font-family:'FreeMono'; color:#6a1009;">d</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> будет </span><span style=" font-family:'FreeMono'; color:#6a1009;">8</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, т.к. переменной </span><span style=" font-family:'FreeMono'; color:#6a1009;">d</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> присваивается значение выражения с запятой, которое в свою очередь равно значению самого правого выражения-операнда.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Запятая в Си используется в двух контекстах: как разделитель списка объектов, например, в операторе описания данных, и как операция, определяющая последовательное вычисление выражений. Поэтому допустимо, например, такое описание с инициализацией: </span><span style=" font-family:'FreeMono'; color:#6a1009;">int a,b,c=(1,2,5),d;</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> где переменная </span><span style=" font-family:'FreeMono'; color:#6a1009;">c</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> инициализируется константным выражением с запятой </span><span style=" font-family:'FreeMono'; color:#6a1009;">1,2,5</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> и принимает значение </span><span style=" font-family:'FreeMono'; color:#6a1009;">5</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Контекст знака запятая (операция или разделитель) компилятор &quot;чувствует&quot; по скобкам. Внутри скобок – это операция запятая, вне скобок – разделитель.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Забегая вперед, отметим, что аналогичная ситуация может возникнуть в списке фактических аргументов при обращении к функции. Обращение к функции, содержащее три аргумента, причем второй имеет значение </span><span style=" font-family:'FreeMono'; color:#6a1009;">5</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">, может выглядеть так: </span><span style=" font-family:'FreeMono'; color:#6a1009;">f(a,(t=3,t+2),c)</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Чаще всего операция запятая используется в заголовках циклов, в местах, </span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">где синтаксис разрешает записать только одно выражение, а надо записать несколько</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">. Тогда выражения объединяются в одно при помощи операции запятая. Например, когда нужно проинициализировать перед началом цикла несколько переменных или же увеличить/уменьшить в конце цикла несколько переменных:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">for (i=1, j=2; i&lt;n; j++,i++)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">  ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p></body></html>