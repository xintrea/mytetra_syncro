<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Основные команды для работы с systemctl</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">systemctl reload ssh обновить конфигурацию сервиса из файла юнита (если у юнита есть эта функция) <br />systemctl status ssh отображает состояние системы, юнитов (в том числе Failed) и запущенные процессы пользователей <br />systemctl status sshd | grep -P &quot;Active.+;&quot; | sed -r &quot;s/.+; | ago//g&quot; время работы службы <br />systemctl start ssh запустить юнит (до перезагрузки) <br />systemctl stop ssh остановить юнит (до перезагрузки) <br />systemctl restart ssh перезапустить сервис <br />systemctl enable ssh добавить в автозагрузку <br />systemctl disable ssh удалить из автозагрузки <br />systemctl mask ssh выключить юнит, который нельзя будет запустить вручную или как зависимость (создает симлинк на /dev/null) <br />systemctl unmask ssh включить юнит (удалить симлинк) <br />systemctl daemon-reload перезапустить юнит systemd <br />systemctl cat ssh отобразить путь и содержимое unit-файла <br />systemctl edit --full ssh открыть для редактирования файл юнита <br />systemctl list-dependencies ssh дерево зависимостей <br />systemctl list-dependencies ssh --reverse зависящие сервисы от указанного юнита <br />systemctl list-units --type service --all отображение статуса всех сервисов <br />systemctl list-unit-files | sed &quot;1d;$ d&quot; | sed &quot;$ d&quot; | wc отобразить кол-во всех файлов конфигурации сервисов на диске <br />systemctl list-unit-files | grep zabbix отфильтровать по имени <br />systemctl list-unit-files --type=service список всех сервисов <br />systemctl list-unit-files --type=service --state=enabled список сервисов, добавленных в автозагрузку <br />systemctl list-units --all --type=service --plain --no-legend --no-pager --output=json <br />--all выводить все типы юнитов, включая активные, неактивные и остановленные <br />--type=service выводить только системные службы управляемые systemd (не ключает в вывод другие типы юнитов, такие как socket или device) <br />--plain вывод в текстовом формате без форматирования <br />--no-legend отключает вывод заголовков для столбцов <br />--no-pager отключает использование постраничного вывода (less) <br />ls /usr/lib/systemd/system юниты поставляемые вместе с системой и устанавливаемыми приложениями <br />ls /run/systemd/system юниты созданные динамически в runtime <br />ls /etc/systemd/system юниты системного администратора</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Утилита systemctl-tui</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">cargo install systemctl-tui --locked быстрый и простой TUI-интерфейс для взаимодействия с службами и журналами systemd на Rust (</span><a href="https://github.com/rgwood/systemctl-tui"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/rgwood/systemctl-tui</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">), от создателя NuShell <br />systemctl-tui</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"><br /></h3>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Как выглядит unit</span></h3>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">#!/bin/bash</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">while true; do</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    addr=&quot;google.com&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    path=&quot;/var/log/icmp-test.log&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    date=$(date | awk '{print $3,$2,$4}')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    loss=$(ping -c 2 $addr | grep -Ewo &quot;[0-9]+%&quot;)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    if [ $loss = &quot;100%&quot; ]; then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">        echo &quot;$date: $addr - unavailable&quot; &gt;&gt; $path</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">        echo &quot;$date: $addr - available&quot; &gt;&gt; $path</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">        tail -n 1 $path</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">    sleep 5</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">done</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">nano /etc/systemd/system/icmp-test-log.service</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[Unit]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Description=icmp test output to log</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">After=network.target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[Service]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ExecStart=/bin/bash &quot;/root/google-icmp-test.sh&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ExecReload=/bin/kill -HUP $MAINPID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">KillMode=process</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Restart=on-failure</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Type=simple</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">[Install]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">WantedBy=multi-user.target</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">systemctl daemon-reload <br />systemctl enable icmp-test-log.service <br />systemctl start icmp-test-log <br />systemctl status icmp-test-log <br />tail -f /var/log/icmp-test.log</span></p>
<h2 style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;"><br /></h2>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Просмотр журналов через journalctl</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl --system отобразить системный журнал <br />journalctl --user отобразить пользовательский журнал текущего пользователя <br />journalctl -m отобразить записи из всех доступных журналов (--merge) <br />journalctl -ek отобразить только сообщения ядра (kernel, --dmesg) из текущей загрузки <br />journalctl -t systemd показать записи с указанным идентификатором системного журнала <br />journalctl _PID=3972315 отобразить сообщения по PID процесса <br />journalctl -eu ssh отобразить сообщения с конца (--pager-end) для выбранного сервиса (--unit)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">g перейти в начало листинга <br />G перейти в конец</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl -fu ssh выводить новые сообщения в реальном времени (-f/--follow) <br />journalctl -fu ssh выводить новые сообщения в реальном времени (-f/--follow) <br />journalctl -ru ssh вывести сообщения с конца (сверху новые записи, --reverse) <br />journalctl -n 100 -u ssh --no-pager вывести 100 строк (--lines) из журнала и не передавать вывод на автоматический скроллинг <br />journalctl -p 3 вывести записи с указанным приоритетом, например, только ошибки и выше по важности: неработоспособность(0), alerts(1), critical(2), errors(3), warning(4), notice(5), info(6), debug(7) <br />journalctl -S &quot;2023-09-01 12:00:00&quot; -U &quot;2023-09-01 15:00:00&quot; отобразить сообщения от (--since) 1 сентября c 12:00:00 по (--until) 15:00:00 <br />journalctl --since today отобразить сообщения за сегодня <br />journalctl -b отобразить сообщения с момента последней загрузки системы (boot) <br />journalctl --list-boots показать список сохраненных загрузок системы <br />journalctl -b ba6b2292a0e84d83a81cedfaa221926f показать сообщения с момента конкретной загрузки системы (--boot) <br />journalctl --quiet не показывать информационные сообщения и предупреждения о привилегиях <br />journalctl --no-hostname подавить вывод поля имени хоста <br />journalctl -n 1 --no-pager --output=json-pretty вывод в формате JSON (json-sse, json-seq) <br />journalctl -n 1 --no-pager --output=json-pretty --output-fields=PRIORITY,MESSAGE отфильтровать вывод</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl --fields вывести список всех используемых полей (UNIT, USER_UNIT, _SYSTEMD_UNIT, _SYSTEMD_USER_UNIT и т.д.)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl --field=UNIT &gt; system_units.log вывести список всех юнитов в системе <br />journalctl --field=USER_UNIT &gt; user_units.log вывести список всех пользовательских юнитов в системе <br />comm -12 &lt;(sort system_units.log) &lt;(sort user_units.log) построчное сравнение двух отсортированных файлов со списком журналов без вывода общих строк в 1 и 2 файлах (-12)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl --disk-usage вывести общее использование диска всеми файлами журнала (Archived and active journals take up 2.3G in the file system) <br />journalctl --flush очистить все данные журнала из директорий /run в /var <br />journalctl --vacuum-time=1month удалить файлы журнала, старше указанного времени (1-го месяца) <br />journalctl --vacuum-size=100M очистить логи, чтобы размер хранилища соответствовал указанному размеру <br />journalctl --vacuum-files=100 оставить только указанное количество файлов журнала <br />journalctl --rotate запустить немедленную ротацию файлов журнала <br />journalctl --sync синхронизировать незаписанные сообщения журнала на диск <br />journalctl --relinquish-var прекратить запись на диск, войти во временную файловую систему <br />journalctl --verify проверить целостность файла журнала</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">journalctl --header вывести список журналов <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">File path</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - путь к файлу журнала на диске <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Incompatible flags</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - несовместимые флаги с этим журналом <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Rotate suggested</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - применяется ли ротация к журналу <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Tail sequential number</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - последовательный номер для конца журнала (указывает на последнее событие в журнале) <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Head realtime timestamp</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - время первого события в журнале <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Tail realtime timestamp</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - время последнего события в журнале <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Objects</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - количество объектов, находящихся в журнале (таких как записи, и не только) <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Entry objects</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - количество объектов, представляющих записи в журнале <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Data objects</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - количество объектов данных, хранящихся в журнале <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Field objects</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - Количество объектов полей (список полей можно получить через --fields) <br /></span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">Disk usage</span><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;"> - используемое пространство на диске для этого журнала</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">nano /etc/systemd/journald.conf</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Storage=auto # журналы сохраняются в /var/log/journal на диске (если доступно достаточно места), или в памяти (/run/log/journal) при недостатке места на диске</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Storage=persistent # журналы всегда сохраняются на диске</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Storage=volatile # журналы хранятся только в памяти (не сохраняются на диск)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Storage=none # журналы не сохраняются</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Seal=yes # включает подписание журналов для обеспечения их целостности. Это добавляет цифровую подпись в журналы, чтобы защитить их от изменений</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">SyncIntervalSec=5m # интервал между синхронизациями журнала с диском (5 минут)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">RateLimitIntervalSec=30s # временной интервал, в течение которого будет ограничено количество записей журнала, если они приходят слишком часто</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">RateLimitBurst=10000 # максимальное количество записей, которое можно сделать в журнал за интервал RateLimitIntervalSec</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">SystemMaxUse=500M # ограничивает максимальное количество дискового пространства, которое могут занимать системные журналы, если пространство превышает этот лимит, старые журналы будут удаляться</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">SystemKeepFree=1G # минимальное количество свободного места на диске, которое должно оставаться для других системных задач, если места на диске становится меньше, система начнет удалять старые журналы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">SystemMaxFileSize= # ограничивает размер одного файла журнала на диске. Если файл превышает этот размер, он будет разделен</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">SystemMaxFiles=100 # максимальное количество файлов журнала, которые могут быть созданы, старые файлы будут удаляться, чтобы освободить место для новых</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">MaxRetentionSec=1month # максимальный срок хранения журналов (например, журналы будут храниться не более месяца)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ForwardToSyslog=yes # должны ли записи журнала перенаправляться в системный журнал (syslog), это позволяет перенаправлять журнал в другие системы, например, rsyslog</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">orwardToKMsg=no # должны ли записи журнала перенаправляться в буфер ядра (KMsg)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ForwardToConsole=no # должны ли записи журнала отображаться на консоли работающего в системе через TTY (не в терминал других пользователей)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">ForwardToWall=yes # должны ли записи журнала отображаться всем пользователям, работающим в системе (уведомления будут выводиться всем пользователям через команду wall)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">MaxLevelStore=debug # максимальный уровень журналируемых записей, которые будут сохраняться (emerg, alert, crit, error, warning, notice, info, debug)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">MaxLevelSyslog=debug # максимальный уровень журналируемых записей, которые будут отправляться в syslog</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">MaxLevelWall=emerg # максимальный уровень журналируемых записей, которые будут выводиться всем пользователям через команду wall</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">LineMax=48K # максимальный размер строки, которая может быть записана в журнал (по умолчанию 48 КБ)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">Audit=no # журналировать события аудита (связанных с безопасностью, например, вход в систему, попытки доступа к файлам и изменения файловых прав, Запуск и завершение процессов и т.п.)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">sudo systemctl restart systemd-journald</span></p>
<h2 style="-qt-paragraph-type:empty; margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:x-large; font-weight:600;"><br /></h2></body></html>