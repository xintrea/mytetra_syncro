<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">top</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">top -c выводит полный путь к исполняемым файлам с ключами, вместо названия <br />top -H выводит потоки процессов <br />top -i не выводит процессы, которые не используют ресурсы процессора <br />top -o %CPU отсортировать по CPU <br />top -o %MEM отсортировать по Memory</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">htop</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">space выделить несколько процессов (отменить Shift+U) <br />u выбрать конкретного пользователя <br />l посмотреть файлы, которые использует процесс <br />s отобразить статистику системных вызовов (strace PID attached) F8 - AutoScroll, F4 - Filter, F9 - Stop/Start Tracing <br />F4 фильтр по ключевому слову (например, cron) <br />F5 древовидная структура <br />F6 сортировка (PERCENT_CPU/PERCENT_MEM/USER/PRIORITY/TIME) <br />F7 повысить приортите (до -20), чем меньше приоритет, тем больше процессорного времени отводится процессу <br />F8 понизить приоритет (до 19) <br />F9/K действие с процессом (сигналы), для завершения процесса: 15, 2, 3, 9 или 19 <br />S (STATE) состояние процесса <br />R [running or runnable] запущенные или находятся в очереди на запуск <br />S [interruptible sleep] прерываемый сон (не исполняется процессором и ждет события или условия для запуска) <br />D [uninterruptible sleep] непрерываемый сон (кратковременное состояние, которое невозможно остановить сигналом, т.к. процесс не может на него ответить) <br />Z [zombie] завершенный процесс, ожидающий пока родительский процесс примет результат <br />T остановленный сигналом SIGSTOP (-19/CTRL+Z) <br />X мертвый (не должен показываться)</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">bpytop</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">sudo apt install bpytop <br />pip3 list | grep psutil проверить пакет <br />pip3 install psutil --break-system-packages установить пакет в обход ограничений <br />python3 -m venv myenv создать виртуальное окружение <br />source myenv/bin/activate активировать виртуальное окружение <br />pip install psutil установить библиотеку для получения информации о системе <br />bpytop <br />deactivate</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">atop</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">apt install atop <br />nano /etc/default/atop <br />LOGINTERVAL=10 <br />systemctl restart atop <br />atop -g показать общую информацию о процессе (по умолчанию) <br />atop -m показать информацию о процессах, связанных с памятью <br />atop -d показать информацию о процессах, связанных с дисками <br />atop -n показать информацию о процессах, связанных с сетью <br />atop -v показывать различную информацию о процессах (PPID родителя, пользователь/группа, дата/время) <br />atop -c показать командную строку для каждого процесса <br />atop -A сортировать процессы в порядке наибольшей активности ресурсов (автоматический режим) <br />atop -C сортировать процессы в порядке потребления процессора (по умолчанию) <br />atop -M сортировать процессы в порядке потребления памяти <br />atop -D сортировать процессы в порядке дисковой активности <br />atop -N сортировать процессы в порядке сетевой активности <br />atop -E сортировать процессы в порядке активности GPU</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">iftop</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">apt install iftop установить пакет <br />iftop -ti ens33 использовать текстовый интерфейс без ncurses <br />iftop -ts 1 -i ens33 печать одного единственного текстового вывода (-s) через 1 секунд, затем выход из системы <br />iftop -tL 0 -s 1 -i ens33 количество строк (-L) для печати <br />iftop -ni ens33 не преобразовывать имена хостов <br />iftop -Ni ens33 не преобразовывать номера портов в сервисы <br />iftop -pi ens33 работать в режиме promiscuous (показывать трафик между другими хостами в одном сегменте сети) <br />iftop -bi ens33 не отображать гистограмму трафика <br />iftop -Bi ens33 отображать пропускную способность в байтах <br />iftop -o 10si ens33 сортировка по второму столбцу (среднее значение трафика за 10 секунд, значение по умолчанию)</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">iotop</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">apt install iotop <br />iotop -o показывать только процессы или потоки, фактически выполняющие ввод-вывод <br />iotop -ou mysql показывать активные процессы от пользователя <br />iotop -P показывать только процессы, без потоков <br />iotop -p PID</span></p>
<h3 style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">top other</span></h3>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">pip install --user glances кроссплатформенный инструмент мониторинга системы на Python (</span><a href="https://github.com/nicolargo/glances"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/nicolargo/glances</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) <br />glances</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">snap install bashtop монитор ресурсов на Bash (</span><a href="https://github.com/aristocratos/bashtop"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/aristocratos/bashtop</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) <br />bashtop</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">npm install gtop -g панель мониторинга системы для терминала на JavaScript (</span><a href="https://github.com/aksakalli/gtop"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/aksakalli/gtop</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) <br />gtop</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">snap install bottom кроссплатформенный графический монитор системы и процессов на Rust (</span><a href="https://github.com/ClementTsang/bottom"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/ClementTsang/bottom</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) <br />bottom</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">curl -sL https://raw.githubusercontent.com/wimpysworld/deb-get/main/deb-get | sudo -E bash -s install deb-get &amp;&amp; deb-get install zenith как top, но с масштабируемыми графиками, а также использованием CPU, GPU, сети и дисков на Rust (</span><a href="https://github.com/bvaisvil/zenith"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; text-decoration: underline; color:#0000ff;">https://github.com/bvaisvil/zenith</span></a><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">) <br />zenith</span></p>
<h2 style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt; font-weight:600;">ps</span></h2>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'DejaVu LGC Sans'; font-size:12pt;">apt-get install -y procps установить пакет procps <br />pstree -a отобразить все (-a) работающие процессы (демоны) и их дочерние в виде дерева <br />ps -FA отобразить подробный вывод (-F, PPID - родительский процесс) всех (-A) работающих процессов <br />ps -LFC mysqld отобразить потоки (-L) в колонках LWP и NLWP конкретного процесса по имени (-C) <br />ps -Fl отобразить приостановленные процессы (фоновые задания &amp;) <br />ps f -F отображает активные процессы текущего пользователя <br />ps f -u root активные процессы указанного пользователя <br />ps -o pid -u lifailon вывести только pid процессов запущенных конкретным пользователем <br />ps -p 3618275 найти процесс по его PID (-p/-s) <br />ps -aux --sort -rss выбрать все процессы, кроме фоновых (-a), сопоставлять с именем пользователя (-u), все процессы вне терминала (-x) и отсортировать по RSS, добавляется %CPU и %MEM <br />ps -lax не сопоставляются идентификаторы процессов с именами пользователей, к выводу добавляется WCHAN - ресурс, которого ожидает процесс <br />ps -FA --sort time сортировать по времени работы процесса <br />ps -Ao comm,user,rss,vsz,command отфильтровать вывод по потреблению памяти, названию команды/процесса и полному вызову команды с ключами <br />PRI приоритет процесса <br />NI уступчивость процесса (nice value от 19 до -20) <br />(($PRI+$NI))=((39+-20))=19 <br />TTY терминал, из под которого запущен процесс <br />TIME общее время процессора, затраченное на работу процесса (bsdtime/cputime/time) или накопленное процессорное время (пользовательское + системное) <br />STIME время запуска команды (bsdstart), если процесс был запущен менее 24 часов назад, то формат вывода будет HH:MM, если больше, то Mmm:SS (Sep 18) <br />C целочисленное значение процента времени процессора (%CPU) за время жизни процесса <br />%CPU процент времени центрального процесса выделенного процессу или использование процессорного времени деленное на время работы процесса (pcpu) <br />%MEM процент реальной памяти, используемой процессом или отношение размера резидентного набора процесса к объему физической памяти на машине (pmem) <br />SZ размер в физических страницах образа ядра процесса. Сюда входят текст, данные и пространство стека <br />RSS постоянное потребление физической памяти (Resident Set Size non-swapped), реальный размер процесса в оперативной памяти, которую процесс занял (то есть что-то сохранил в память) <br />VSZ виртуальная память (Virtual Memory Size) в килобайтах (1024-байтных единицах), которую выделили процессу, но это не означает, что он успел в эту память что-то записать <br />LWP идентификатор дочернего потока (Light-Weight Process), будет выведен текущий ID если один или первый поток <br />NLWP количество (Number) дочерних потоков (ps -LFC mysqld | sed 1d | wc -l) <br />PSR ядро процессора, на котором выполняется процесс <br />STAT R - выполняется, D - ожидает записи на диск, S - неактивен (&lt;20 с), T - приостановлен, Z - зомби, с дополнительными флагами (W - процесс выгружен на диск, &lt; - процесс имеет повышенный приоритет, N - процесс имеет пониженный приоритет, L - некоторые процессы блокированы в ядре, s - процесс является лидером сеанса) <br />maj_flt количество крупных страничных ошибок, произошедших с данным процессом <br />min_flt количество мелких ошибок страниц <br />ps -Ao comm,user,cputime,pcpu,pmem,sz,rss,vsz,nlwp,psr,pri,ni --sort cputime</span></p>
<h3 style="-qt-paragraph-type:empty; margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:large; font-weight:600;"><br /></h3></body></html>