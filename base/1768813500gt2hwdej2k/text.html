<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Стало известно, что с января 2026 года РКН стал резать траффик для законно и незаконно заблокированных ресурсов новым методом: теперь от заблокированного ресурса пропускается пакеты объемом до 16Кб.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Что такое незаконно заблокированные ресурсы?</span> Это ресурсы, которые не нарушают законы Российской Федерации, но по неизвестным причинам включены в списки Роскомнадзора. Классический пример - это YouTube. Законного обоснования в блокировке этого ресурса нет (в отличие от WhatsUp), но блокировка YouTube происходит в РФ негласным образом. Делается это по двум причинам:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. YouTube, как площадка, сама имеет возможность блокировать контент, и под политическую блокировку YouTube попали каналы государственных новостных агенств РФ. Так как YouTube - частная лавочка с зарубежной юрисдикцией, она сама может решать, что запрещать к показу на своем сервисе. Да, это неприятно, но законодательство РФ здесь не нарушается. Поэтому властями был взят курс на негласную встречную блокировку.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Блокировка осуществляется в корпоративных интересах частных компаний и сайтов, для которых YouTube является прямым конкурентом - RuTube, Vk Видео, Платформа.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Помимо YouTube, под незаконную блокировку часто попадают сайты, которые находятся на хостинг-площадках, где располагаются и блокируемые сайты. Это происходит из-за блокировки больших диапазонов IP, которые захватывают и совершенно непричастные к нарушениям сайты. Пример такого сайта - сайт <span style=" font-family:'FreeMono'; color:#6a1009;">core.tcl.tk</span> с GUI-библиотекой <span style=" font-weight:600;">Tcl/Tk</span>. Чем она помешала Роскомнадзору - совершенно непонятно.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">* * *</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По вышеуказанным причинам, необходимо уметь получать заданный файл с сайта даже если сайт находится под блокировкой. Идея в том, что при ограничении на 16Кб, можно автоматически конструировать повторные Retry-запросы, в которых будет указано смещение позиции, с которой надо начать загрузку. Таким образом можно скачать файл по-частям, причем длинна кусков будет ограничена тем значением, которое установил Роскомнадзор (больше, чем дает РКН, кусок все равно не получится). Недостаток этого метода состоит в том, что не все веб-серверы настроены на возможность докачки файлов.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда для выкачивания файла через <span style=" font-family:'FreeMono'; color:#6a1009;">curl</span> выглядит следующим образом:<br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">curl -LOR -C - --retry 1000 --retry-delay 0.1 -y 1 -Y 1 </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">&lt;URL&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Здесь опция <span style=" font-family:'FreeMono'; color:#6a1009;">-C</span> обозначает докачку, а в опции <span style=" font-family:'FreeMono'; color:#6a1009;">--retry</span> указывается число попыток. Этот метод будет работать не быстро, но файл должен в конце концов скачаться.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По непроверенной информации данный метод может в любой момент перестать работать, так как РКН все время меняет механизм блокировки. Опция <span style=" font-family:'FreeMono'; color:#6a1009;">--retry</span> не рвёт сессию, а лимит 16Kb РКН может применяеть ко всем попыткам вместе.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поэтому может сработать другой метод, с разрывом сессии на каждый скачиваемый кусок:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">while : ; do curl -LOR -C - --max-time 0.2 </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">&lt;URL&gt;</span><span style=" font-family:'FreeMono'; color:#6a1009;"> &amp;&amp; break ; done</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Время <span style=" font-family:'FreeMono'; color:#6a1009;">--max-time</span> нужно подбирать исходя из качества связи. При <span style=" font-family:'FreeMono'; color:#6a1009;">0.1</span> curl может не успеваеть соединиться, а при <span style=" font-family:'FreeMono'; color:#6a1009;">1</span>, <span style=" font-family:'FreeMono'; color:#6a1009;">2</span> и больше - будет большую часть времени простаивать, что неэффективно. При это иногда и при больших значениях curl тоже не успевает подключиться. То есть, время ожидания соединения надо подбирать.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">А можно использовать wget без цикла, вот так:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">wget --read-timeout=2 -c &lt;URL&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'DejaVu LGC Sans'; font-size:12pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Этот вариант, в случае остановки скачивания, будет сам ждать 2 секунды, и запросит от сервера продолжение закачки. Вот как выглядит лог выкачивания GUI-библиотеки Tcl/Tk:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">&gt; wget --read-timeout=2 -c https://core.tcl.tk/tcltls/uv/tcltls-1.7.22.tar.gz</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Распознаётся core.tcl.tk (core.tcl.tk)… 104.16.74.106, 104.16.75.106, 2606:4700::6810:4a6a, ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Подключение к core.tcl.tk (core.tcl.tk)|104.16.74.106|:443... соединение установлено.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">HTTP-запрос отправлен. Ожидание ответа… 302 Moved Temporarily</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Адрес: https://core.tcl-lang.org/tcltls/uv/tcltls-1.7.22.tar.gz [переход]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">--2026-01-19 12:30:08--  https://core.tcl-lang.org/tcltls/uv/tcltls-1.7.22.tar.gz</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Распознаётся core.tcl-lang.org (core.tcl-lang.org)… 104.19.243.68, 104.19.242.68, 2606:4700::6813:f244, ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Подключение к core.tcl-lang.org (core.tcl-lang.org)|104.19.243.68|:443... соединение установлено.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">HTTP-запрос отправлен. Ожидание ответа… 206 Partial Content</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Длина: 165206 (161K), 148037 (145K) осталось [application/x-gzip]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Сохранение в: «tcltls-1.7.22.tar.gz»</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">tcltls-1.7.22.tar.gz         20%[++++===&gt;                                  ]  32,79K  --.-KB/s    за 2,0s</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">2026-01-19 12:30:11 (8,01 KB/s) - Ошибка чтения, позиция 33575/165206 (Время ожидания соединения истекло). Повтор.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">--2026-01-19 12:30:12--  (попытка: 2)  https://core.tcl-lang.org/tcltls/uv/tcltls-1.7.22.tar.gz</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Подключение к core.tcl-lang.org (core.tcl-lang.org)|104.19.243.68|:443... соединение установлено.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">HTTP-запрос отправлен. Ожидание ответа… 206 Partial Content</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Длина: 165206 (161K), 131631 (129K) осталось [application/x-gzip]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Сохранение в: «tcltls-1.7.22.tar.gz»</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">tcltls-1.7.22.tar.gz         31%[++++++++====&gt;                             ]  50,86K  --.-KB/s    за 2,0s</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">2026-01-19 12:30:15 (9,03 KB/s) - Ошибка чтения, позиция 52080/165206 (Время ожидания соединения истекло). Повтор.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'FreeMono'; font-size:8pt; color:#6a1009;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">--2026-01-19 12:30:17--  (попытка: 3)  https://core.tcl-lang.org/tcltls/uv/tcltls-1.7.22.tar.gz</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">Подключение к core.tcl-lang.org (core.tcl-lang.org)|104.19.243.68|:443... соединение установлено.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:8pt; color:#6a1009;">...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Видно, что файл библиотеки медленно, но верно, выкачивается кусками по 16...18 Кб.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>