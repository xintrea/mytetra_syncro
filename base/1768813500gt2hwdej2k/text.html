<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Стало известно, что с января 2026 года РКН стал резать траффик для законно и незаконно заблокированных ресурсов новым методом: теперь от заблокированного ресурса пропускается пакеты объемом до 16Кб.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Что такое незаконно заблокированные ресурсы?</span> Это ресурсы, которые не нарушают законы Российской Федерации, но по неизвестным причинам включены в списки Роскомнадзора. Классический пример - это YouTube. Законного обоснования в блокировке этого ресурса нет (в отличие от WhatsUp), но блокировка YouTube происходит в РФ негласным образом. Делается это по двум причинам:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. YouTube, как площадка, сама имеет возможность блокировать контент, и под политическую блокировку YouTube попали каналы государственных новостных агенств РФ. Так как YouTube - частная лавочка с зарубежной юрисдикцией, она сама может решать, что запрещать к показу на своем сервисе. Да, это неприятно, но законодательство РФ здесь не нарушается. Поэтому властями был взят курс на негласную встречную блокировку.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">2. Блокировка осуществляется в корпоративных интересах частных компаний и сайтов, для которых YouTube является прямым конкурентом - RuTube, Vk Видео, Платформа.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Помимо YouTube, под незаконную блокировку часто попадают сайты, которые находятся на хостинг-площадках, где располагаются и блокируемые сайты. Это происходит из-за блокировки больших диапазонов IP, которые захватывают и совершенно непричастные к нарушениям сайты.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">* * *</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поэтому, необходимо уметь получать заданный файл с сайта даже если сайт находится под блокировкой. Идея в том, что при ограничении на 16 Кб, можно автоматически конструировать повторные Retry-запросы, в которых будет указано смещение. Таким образом можно скачать файл по-частям, причем длинна будет ограничена тем значением, которое установил Роскомнадзор. Недостаток этого метода состоит в том, что не все веб-серверы настроены на возможность докачки файлов.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда для выкачивания файла через <span style=" font-family:'FreeMono'; color:#6a1009;">curl</span> выглядит следующим образом:<br /><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">curl -LOR -C - --retry 1000 --retry-delay 0.1 -y 1 -Y 1 </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">&lt;URL&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Здесь опция <span style=" font-family:'FreeMono'; color:#6a1009;">-C</span> обозначает докачку, а в опции <span style=" font-family:'FreeMono'; color:#6a1009;">--retry</span> указывается число попыток. Этот метод будет работать не быстро, но файл должен в конце концов скачаться.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">По непроверенной информации данный метод может в любой момент перестать работать, так как РКН все время меняет механизм блокировки. Опция <span style=" font-family:'FreeMono'; color:#6a1009;">--retry</span> не рвёт сессию, а лимит 16Kb РКН может применяеть ко всем попыткам вместе.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поэтому может сработать другой метод, с разрывом сессии на каждый скачиваемый кусок:</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:40px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; color:#6a1009;">while : ; do curl -LOR -C - --max-time 0.2 </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">&lt;URL&gt;</span><span style=" font-family:'FreeMono'; color:#6a1009;"> &amp;&amp; break ; done</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Время --max-time нужно подбирать исходя из качества связи. При 0.1 соеу меня не успевает соединиться, при 1, 2 и больше большую часть времени простаивает, но иногда тоже не успевает подключиться.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>